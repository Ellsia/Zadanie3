<!doctype html>

<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>1.5</title>
	
	<link type="text/css" rel="stylesheet" href="style.css" media="all" />
	

	
</head>

<body class="body">


<div class="fon">
<div id="main">

	
	<div class="form1" id="form1" style="display: none;">
	<div class="form_box">
		
		<form action="#" method="post" class="rf">
		
			<label for="user_name">Имя пользователя:</label>
			<input type="text" class="rfield" id="user_name" />
			
			<label for="user_family">Фамилия пользователя</label>
			<input type="text" class="rfield" id="user_family" />
			
			<label for="user_phone">Возраст:</label>
			<input type="text" class="rfield" id="user_phone" />
			
			<label for="user_work">Профессия:</label>
			<input type="text" class="rfield" id="user_work" />
			
			<input type="submit" class="btn_submit disabled" value="Отправить данные" />
			
		</form>

		
	</div>
		
</div>
<div class="form_box2">
<div class="rf" action="#" method="post"  id="form2" style="display: none;" >
	
			<label for="user_name">Отмечаете ли Вы Новый год:</label>
			<input type="text" class="rfield" id="user_name" />

			<label for="user_family">Верите ли Вы в Деда Мороза: </label>
			<input type="text" class="rfield" id="user_family" />
			
			<label for="user_phone">Какой подарок Вы бы хотели Новый год?</label>
			<input type="text" class="rfield" id="user_phone" />


			
			<input type="submit" class="btn_submit disabled" value="Отправить" />
			
	</div>
		</div>
	

	<div class="clear"></div>

</div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">
(function( $ ){

	$(function() {

		$('.rf').each(function(){
			var form = $(this),
				btn = form.find('.btn_submit');
			
			form.find('.rfield').addClass('empty_field');
			
			// Функция проверки полей формы
			function checkInput(){
				form.find('.rfield').each(function(){
					if($(this).val() != ''){
						$(this).removeClass('empty_field');
					} else {
						$(this).addClass('empty_field');
					}
				});
			}
			
			// Функция подсветки незаполненных полей
			function lightEmpty(){
				form.find('.empty_field').css({'border-color':'#d8512d'});
				setTimeout(function(){
					form.find('.empty_field').removeAttr('style');
				},500);
			}
			
			setInterval(function(){
				checkInput();
				var sizeEmpty = form.find('.empty_field').size();
				if(sizeEmpty > 0){
					if(btn.hasClass('disabled')){
						return false
					} else {
						btn.addClass('disabled')
					}
				} else {
					btn.removeClass('disabled')
				}
			},500);

			window.onload = function(){
  $("#form1").fadeIn(600).animate({
      opacity: 1.0,
     
      display:"toggle",
 }, { duration: 3500, queue: false });
};

			btn.click(function(){
				if($(this).hasClass('disabled')){
					lightEmpty();
					return false
				} else { 
					form.submit(function() {
						$('#form1').hide();
						$('.body').css('background-image', "url(fon.jpg)")
			            $("#form2").fadeIn(500).animate({
      opacity: 1.0,
      display:"toggle",
 }, { duration: 3000, queue: false });
			           return false;
			            });
				}
					
			});

			
		});

		
	});

})( jQuery );
</script>

</body>
</html>